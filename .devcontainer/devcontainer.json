{
    "name": "test-poc DevContainer",
    "image": "mcr.microsoft.com/devcontainers/python:3.11-bookworm",
    "remoteUser": "vscode",
    "forwardPorts": [8000, 5173],
    "portsAttributes": {
        "5173": {
                "label": "Frontend",
                "onAutoForward": "notify",
                "elevateIfNeeded": true
            },
            "8000": {
                "label": "Backend",
                "onAutoForward": "silent"
            }
    },
    "appPort": [5173, 8000],
    "mounts": [
        "source=${localEnv:HOME}/.ssh,target=/home/vscode/.ssh,type=bind,consistency=cached"
    ],
    "workspaceFolder": "${localWorkspaceFolder}",
    "workspaceMount": "source=${localWorkspaceFolder},target=${localWorkspaceFolder},type=bind",
    "containerEnv": {
        "AWS_PROFILE": "default"
    },
    "runArgs": ["--cpus=4", "--memory=8g"],
    "hostRequirements": {
        "cpus": 4,
        "memory": "8gb"
    },
    "initializeCommand": "mkdir -p ${localWorkspaceFolder}/.mounts && touch ${localWorkspaceFolder}/.mounts/.zsh_history",
    "postCreateCommand": "touch ~/.zsh_history && sudo apt-get update && npm install -g @openai/codex && git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions && sed -i 's/plugins=(git)/plugins=(git zsh-autosuggestions)/' ~/.zshrc && echo 'eval \"$(just --completions zsh)\"' >> ~/.zshrc && just install && curl -L https://github.com/zellij-org/zellij/releases/latest/download/zellij-x86_64-unknown-linux-musl.tar.gz | tar xz && sudo mv zellij /usr/local/bin/ && just install",
    "features": {
        "ghcr.io/devcontainers/features/common-utils:2": {
            "installZsh": true,
            "configureZshAsDefaultShell": true,
            "installOhMyZsh": true,
            "installOhMyZshConfig": true,
            "upgradePackages": true,
            "username": "automatic",
            "userUid": "automatic",
            "userGid": "automatic"
        },
        "ghcr.io/devcontainers/features/git:1": {
            "ppa": true,
            "version": "latest"
        },
        "ghcr.io/devcontainers/features/github-cli:1": {
            "installDirectlyFromGitHubRelease": true,
            "version": "latest"
        },
        "ghcr.io/devcontainers/features/aws-cli:1": {},
        "ghcr.io/devcontainers/features/docker-outside-of-docker:1": {},
        "ghcr.io/devcontainers/features/node:1": {
            "version": "20"
        },
        "ghcr.io/jsburckhardt/devcontainer-features/uv:1": {
            "version": "latest"
        },
        "ghcr.io/guiyomh/features/just:0": {
            "version": "latest"
        }
    },
    "customizations": {
        "vscode": {
            "extensions": [
                "biomejs.biome",
                "openai.chatgpt",
                "GitHub.copilot",
                "ms-vsliveshare.vsliveshare",
                "ms-python.python",
                "ms-python.debugpy",
                "charliermarsh.ruff",
                "bierner.markdown-mermaid"
            ],
            "settings": {
                "python.defaultInterpreterPath": "/workspaces/test-poc/.venv/bin/python",
                "editor.defaultFormatter": "biomejs.biome",
                "editor.formatOnSave": true,
                "editor.codeActionsOnSave": {
                    "source.organizeImports.biome": "always",
                    "source.fixAll.biome": "always"
                },
                "[typescript]": {
                    "editor.defaultFormatter": "biomejs.biome"
                },
                "[typescriptreact]": {
                    "editor.defaultFormatter": "biomejs.biome"
                }
            }
        }
    }
}
